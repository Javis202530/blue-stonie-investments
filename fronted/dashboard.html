<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
</head>
<body>

<h2>Welcome!</h2>
<p>You are logged in.</p>

<button onclick="logout()">Logout</button>
<div class="card">
  <h3>Deposit Funds</h3>
  <input id="depositAmount" type="number" placeholder="Enter amount" />
  <button onclick="deposit()">Deposit</button>
</div>
<div class="card">
  <h3>Withdraw Funds</h3>
  <input id="withdrawAmount" type="number" placeholder="Enter amount" />
  <button onclick="withdraw()">Request Withdrawal</button>
</div>


<script>
  if (!localStorage.getItem("token")) {
    window.location.href = "index.html";
  }

  function logout() {
    localStorage.removeItem("token");
    window.location.href = "index.html";
  }
<script>
  const token = localStorage.getItem("token");

  if (!token) {
    window.location.href = "index.html";
  }

  fetch("http://localhost:5000/api/auth/me", {
    headers: {
      Authorization: token
    }
  })
    .then(res => res.json())
    .then(user => {
      document.getElementById("username").innerText = user.name;
      document.getElementById("email").innerText = user.email;
    })
    .catch(() => {
      localStorage.removeItem("token");
      window.location.href = "index.html";
    });

  function logout() {
    localStorage.removeItem("token");
    window.location.href = "index.html";
  }
  function deposit() {
  const amount = document.getElementById("depositAmount").value;
  const token = localStorage.getItem("token");

  fetch("http://localhost:5000/api/auth/deposit", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: token
    },
    body: JSON.stringify({ amount })
  })
    .then(res => res.json())
    .then(data => {
      alert(data.message);
      location.reload();
    });
}function withdraw() {
  const amount = document.getElementById("withdrawAmount").value;
  const token = localStorage.getItem("token");

  fetch("http://localhost:5000/api/auth/withdraw", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: token
    },
    body: JSON.stringify({ amount })
  })
    .then(res => res.json())
    .then(data => {
      alert(data.message);
      location.reload();
    });
}


</script>



</body>
</html>
